---
import BaseLayout from "../layouts/BaseLayout.astro";
import { Image } from "astro:assets";
---

<BaseLayout sideBarActiveItemID="about me">
  <div class="w-fit mx-auto mt-12 mb-10">
    <div
      class="avatar transition-all duration-500 ease-in-out hover:scale-105 block m-auto"
    >
      <div
        class="w-64 md:w-80 lg:w-[28rem] aspect-square rounded-full border-4 border-primary/10 shadow-2xl overflow-hidden"
      >
        <Image
          class="w-full h-full object-cover"
          format="png"
          width={500}
          height={500}
          src="/profile/me.png"
          alt="Jes√∫s Eduardo Hermosilla D√≠az"
        />
      </div>
    </div>
  </div>

  <section class="pb-16 mt-8">
    <div class="max-w-4xl mx-auto text-center px-4">
      <h1
        class="text-3xl md:text-4xl font-light leading-relaxed text-base-content"
      >
        ¬°Hola! üëã I'm <span class="font-bold text-primary"
          >Jes√∫s Eduardo Hermosilla D√≠az</span
        >
      </h1>
      <p
        class="text-xl md:text-2xl mt-6 leading-relaxed text-base-content/80 font-serif italic"
      >
        A physicist pursuing a Ph.D. in Artificial Intelligence in Mexico. Here
        I document my academic journey.
      </p>
    </div>
  </section>

  <section class="max-w-2xl mx-auto mb-12 px-6">
    <div class="chat chat-start">
      <div class="chat-image avatar">
        <div
          class="w-12 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2"
        >
          <img alt="Me" src="/profile/me.png" />
        </div>
      </div>
      <div class="chat-bubble bg-primary text-primary-content shadow-lg">
        Check out my latest projects!
      </div>
    </div>
  </section>

  <div class="divider my-16 opacity-30"></div>

  <section class="mb-20 px-4">
    <div class="text-center mb-10">
      <h2 class="text-3xl font-bold">Behind the Scenes</h2>
    </div>

    <div id="work-carousel-container" class="group relative max-w-4xl mx-auto">
      <div
        id="work-inner-carousel"
        class="carousel w-full rounded-2xl shadow-xl bg-base-300"
      >
        {
          [1, 2, 3, 4, 5, 6, 7, 8].map((i) => (
            <div
              id={`slide${i}`}
              class="carousel-item relative w-full flex justify-center items-center bg-base-100"
            >
              <img
                src={`/working/img${i}.png`}
                class="h-[28rem] w-full object-contain p-2"
                alt={`Lab image ${i}`}
              />

              <div class="absolute flex justify-between transform -translate-y-1/2 left-5 right-5 top-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                <a
                  href={`#slide${i === 1 ? 8 : i - 1}`}
                  class="btn btn-circle btn-neutral bg-opacity-50 border-none text-white"
                >
                  ‚ùÆ
                </a>
                <a
                  href={`#slide${i === 8 ? 1 : i + 1}`}
                  class="btn btn-circle btn-neutral bg-opacity-50 border-none text-white"
                >
                  ‚ùØ
                </a>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  const carousel = document.getElementById("work-inner-carousel");
  const wrapper = document.getElementById("work-carousel-container");

  let currentSlide = 1;
  const totalSlides = 8;
  let intervalId;

  const startAutoScroll = () => {
    intervalId = setInterval(() => {
      currentSlide = currentSlide >= totalSlides ? 1 : currentSlide + 1;
      const target = document.getElementById(`slide${currentSlide}`);

      if (target && carousel) {
        carousel.scrollTo({
          left: target.offsetLeft,
          behavior: "smooth",
        });
      }
    }, 4000);
  };

  const stopAutoScroll = () => {
    if (intervalId) clearInterval(intervalId);
  };

  startAutoScroll();

  if (wrapper) {
    wrapper.addEventListener("mouseenter", stopAutoScroll);
    wrapper.addEventListener("mouseleave", startAutoScroll);
  }
</script>
